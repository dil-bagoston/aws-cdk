// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`Logs Delivery Mixin for a resource 1`] = `
"/* eslint-disable prettier/prettier, @stylistic/max-len */
import * as cdk from "aws-cdk-lib/core";
import * as interfaces from "aws-cdk-lib/interfaces";
import * as constructs from "constructs";
import * as core from "../../core";
import * as logsDelivery from "../aws-logs/logs-delivery";
import * as service from "aws-cdk-lib/aws-some";

/**
 * Builder for CfnThingLogsMixin to generate APPLICATION_LOGS for CfnThing
 *
 * @cloudformationResource AWS::Some::Resource
 * @logType APPLICATION_LOGS
 * @stability external
 */
export class CfnThingApplicationLogs {
  /**
   * Send logs to an S3 Bucket
   *
   * @param props Additional properties that are optionally used in log delivery for S3 destinations
   */
  public toS3(bucket: interfaces.aws_s3.IBucketRef, props?: CfnThingApplicationLogsS3Props): CfnThingLogsMixin {
    {
      return new CfnThingLogsMixin("APPLICATION_LOGS", new logsDelivery.S3LogsDelivery(bucket, {
        permissionsVersion: logsDelivery.S3LogsDeliveryPermissionsVersion.V2,
        kmsKey: props?.encryptionKey,
        outputFormat: props?.outputFormat,
        providedFields: props?.recordFields,
        mandatoryFields: undefined
      }));
    }
  }

  /**
   * Send logs to a CloudWatch Log Group
   *
   * @param props Additional properties that are optionally used in log delivery for Log Group destinations
   */
  public toLogGroup(logGroup: interfaces.aws_logs.ILogGroupRef, props?: CfnThingApplicationLogsLogGroupProps): CfnThingLogsMixin {
    {
      return new CfnThingLogsMixin("APPLICATION_LOGS", new logsDelivery.LogGroupLogsDelivery(logGroup, {
        outputFormat: props?.outputFormat,
        providedFields: props?.recordFields,
        mandatoryFields: undefined
      }));
    }
  }

  /**
   * Send logs to a Firehose Delivery Stream
   *
   * @param props Additional properties that are optionally used in log delivery for Firehose destinations
   */
  public toFirehose(deliveryStream: interfaces.aws_kinesisfirehose.IDeliveryStreamRef, props?: CfnThingApplicationLogsFirehoseProps): CfnThingLogsMixin {
    {
      return new CfnThingLogsMixin("APPLICATION_LOGS", new logsDelivery.FirehoseLogsDelivery(deliveryStream, {
        outputFormat: props?.outputFormat,
        providedFields: props?.recordFields,
        mandatoryFields: undefined
      }));
    }
  }

  /**
   * Delivers logs to a pre-created delivery destination
   *
   * Supported destinations are S3, CWL, FH
   * You are responsible for setting up the correct permissions for your delivery destination, toDestination() does not set up any permissions for you.
   * Delivery destinations that are imported from another stack using CfnDeliveryDestination.fromDeliveryDestinationArn() or CfnDeliveryDestination.fromDeliveryDestinationName() are supported by toDestination().
   *
   * @param props Additional properties that are optionally used in log delivery for destinations
   */
  public toDestination(destination: interfaces.aws_logs.IDeliveryDestinationRef, props?: CfnThingApplicationLogsDestProps): CfnThingLogsMixin {
    {
      return new CfnThingLogsMixin("APPLICATION_LOGS", new logsDelivery.DestinationLogsDelivery(destination, {
        providedFields: props?.recordFields,
        mandatoryFields: undefined
      }));
    }
  }
}

/**
 * Builder for CfnThingLogsMixin to generate ACCESS_LOGS for CfnThing
 *
 * @cloudformationResource AWS::Some::Resource
 * @logType ACCESS_LOGS
 * @stability external
 */
export class CfnThingAccessLogs {
  /**
   * Send logs to an S3 Bucket
   *
   * @param props Additional properties that are optionally used in log delivery for S3 destinations
   */
  public toS3(bucket: interfaces.aws_s3.IBucketRef, props?: CfnThingAccessLogsS3Props): CfnThingLogsMixin {
    {
      return new CfnThingLogsMixin("ACCESS_LOGS", new logsDelivery.S3LogsDelivery(bucket, {
        permissionsVersion: logsDelivery.S3LogsDeliveryPermissionsVersion.V2,
        kmsKey: props?.encryptionKey,
        outputFormat: props?.outputFormat,
        providedFields: props?.recordFields,
        mandatoryFields: ["resource-id","body"]
      }));
    }
  }

  /**
   * Send logs to a CloudWatch Log Group
   *
   * @param props Additional properties that are optionally used in log delivery for Log Group destinations
   */
  public toLogGroup(logGroup: interfaces.aws_logs.ILogGroupRef, props?: CfnThingAccessLogsLogGroupProps): CfnThingLogsMixin {
    {
      return new CfnThingLogsMixin("ACCESS_LOGS", new logsDelivery.LogGroupLogsDelivery(logGroup, {
        outputFormat: props?.outputFormat,
        providedFields: props?.recordFields,
        mandatoryFields: ["resource-id","body"]
      }));
    }
  }

  /**
   * Send logs to a Firehose Delivery Stream
   *
   * @param props Additional properties that are optionally used in log delivery for Firehose destinations
   */
  public toFirehose(deliveryStream: interfaces.aws_kinesisfirehose.IDeliveryStreamRef, props?: CfnThingAccessLogsFirehoseProps): CfnThingLogsMixin {
    {
      return new CfnThingLogsMixin("ACCESS_LOGS", new logsDelivery.FirehoseLogsDelivery(deliveryStream, {
        outputFormat: props?.outputFormat,
        providedFields: props?.recordFields,
        mandatoryFields: ["resource-id","body"]
      }));
    }
  }

  /**
   * Delivers logs to a pre-created delivery destination
   *
   * Supported destinations are S3, CWL, FH
   * You are responsible for setting up the correct permissions for your delivery destination, toDestination() does not set up any permissions for you.
   * Delivery destinations that are imported from another stack using CfnDeliveryDestination.fromDeliveryDestinationArn() or CfnDeliveryDestination.fromDeliveryDestinationName() are supported by toDestination().
   *
   * @param props Additional properties that are optionally used in log delivery for destinations
   */
  public toDestination(destination: interfaces.aws_logs.IDeliveryDestinationRef, props?: CfnThingAccessLogsDestProps): CfnThingLogsMixin {
    {
      return new CfnThingLogsMixin("ACCESS_LOGS", new logsDelivery.DestinationLogsDelivery(destination, {
        providedFields: props?.recordFields,
        mandatoryFields: ["resource-id","body"]
      }));
    }
  }
}

/**
 * @cloudformationResource AWS::Some::Resource
 * @mixin true
 * @stability external
 * @see http://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-some-resource.html
 */
export class CfnThingLogsMixin extends core.Mixin implements core.IMixin {
  public static readonly APPLICATION_LOGS: CfnThingApplicationLogs = new CfnThingApplicationLogs();

  public static readonly ACCESS_LOGS: CfnThingAccessLogs = new CfnThingAccessLogs();

  protected readonly logType: string;

  protected readonly logDelivery: logsDelivery.ILogsDelivery;

  /**
   * Create a mixin to enable vended logs for \`AWS::Some::Resource\`.
   *
   * @param logType Type of logs that are getting vended
   * @param logDelivery Object in charge of setting up the delivery source, delivery destination, and delivery connection
   */
  public constructor(logType: string, logDelivery: logsDelivery.ILogsDelivery) {
    super();
    this.logType = logType;
    this.logDelivery = logDelivery;
  }

  /**
   * Check if this mixin supports the given construct (has vendedLogs property)
   */
  public supports(construct: constructs.IConstruct): construct is service.CfnThing {
    return (cdk.CfnResource.isCfnResource(construct) && service.CfnThing.isCfnThing(construct));
  }

  /**
   * Apply vended logs configuration to the construct
   */
  public applyTo(resource: constructs.IConstruct): void {
    if (!this.supports(resource)) {
      return;
    }
    const sourceArn = service.CfnThing.arnForThing(resource);
    this.logDelivery.bind(resource, this.logType, sourceArn);
  }
}

/**
 * Output Format options for each destination of CfnThingApplicationLogs.
 */
export class CfnThingApplicationLogsOutputFormat {

}

export namespace CfnThingApplicationLogsOutputFormat {
  export enum S3 {
    JSON = "json",
    PLAIN = "plain",
    W3C = "w3c",
    PARQUET = "parquet",
  }

  export enum LogGroup {
    PLAIN = "plain",
    JSON = "json",
  }

  export enum Firehose {
    JSON = "json",
    RAW = "raw",
    PLAIN = "plain",
  }
}

export enum CfnThingApplicationLogsRecordFields {
  RESOURCE_ID = "resource_id",
  ACCOUNT_ID = "account_id",
  EVENT_TYPE = "event_type",
}

export interface CfnThingApplicationLogsS3Props {
  /**
   * Encrpytion key for your delivery bucket
   */
  readonly encryptionKey?: interfaces.aws_kms.IKeyRef;

  /**
   * Format for log output, options are json,plain,w3c,parquet
   */
  readonly outputFormat?: CfnThingApplicationLogsOutputFormat.S3;

  /**
   * Record fields that can be provided to a log delivery
   */
  readonly recordFields?: Array<CfnThingApplicationLogsRecordFields>;
}

export interface CfnThingApplicationLogsLogGroupProps {
  /**
   * Format for log output, options are plain,json
   */
  readonly outputFormat?: CfnThingApplicationLogsOutputFormat.LogGroup;

  /**
   * Record fields that can be provided to a log delivery
   */
  readonly recordFields?: Array<CfnThingApplicationLogsRecordFields>;
}

export interface CfnThingApplicationLogsFirehoseProps {
  /**
   * Format for log output, options are json,raw,plain
   */
  readonly outputFormat?: CfnThingApplicationLogsOutputFormat.Firehose;

  /**
   * Record fields that can be provided to a log delivery
   */
  readonly recordFields?: Array<CfnThingApplicationLogsRecordFields>;
}

export interface CfnThingApplicationLogsDestProps {
  /**
   * Record fields that can be provided to a log delivery
   */
  readonly recordFields?: Array<CfnThingApplicationLogsRecordFields>;
}

/**
 * Output Format options for each destination of CfnThingAccessLogs.
 */
export class CfnThingAccessLogsOutputFormat {

}

export namespace CfnThingAccessLogsOutputFormat {
  export enum S3 {
    JSON = "json",
    PLAIN = "plain",
    W3C = "w3c",
    PARQUET = "parquet",
  }

  export enum LogGroup {
    PLAIN = "plain",
    JSON = "json",
  }

  export enum Firehose {
    JSON = "json",
    RAW = "raw",
    PLAIN = "plain",
  }
}

export enum CfnThingAccessLogsRecordFields {
  ACCOUNT_ID = "account-id",
  TRACE_ID = "trace-id",
  SPAN_ID = "span-id",
  RESOURCE_ID = "resource-id",
  BODY = "body",
}

export interface CfnThingAccessLogsS3Props {
  /**
   * Encrpytion key for your delivery bucket
   */
  readonly encryptionKey?: interfaces.aws_kms.IKeyRef;

  /**
   * Format for log output, options are json,plain,w3c,parquet
   */
  readonly outputFormat?: CfnThingAccessLogsOutputFormat.S3;

  /**
   * Record fields that can be provided to a log delivery
   */
  readonly recordFields?: Array<CfnThingAccessLogsRecordFields>;
}

export interface CfnThingAccessLogsLogGroupProps {
  /**
   * Format for log output, options are plain,json
   */
  readonly outputFormat?: CfnThingAccessLogsOutputFormat.LogGroup;

  /**
   * Record fields that can be provided to a log delivery
   */
  readonly recordFields?: Array<CfnThingAccessLogsRecordFields>;
}

export interface CfnThingAccessLogsFirehoseProps {
  /**
   * Format for log output, options are json,raw,plain
   */
  readonly outputFormat?: CfnThingAccessLogsOutputFormat.Firehose;

  /**
   * Record fields that can be provided to a log delivery
   */
  readonly recordFields?: Array<CfnThingAccessLogsRecordFields>;
}

export interface CfnThingAccessLogsDestProps {
  /**
   * Record fields that can be provided to a log delivery
   */
  readonly recordFields?: Array<CfnThingAccessLogsRecordFields>;
}"
`;
